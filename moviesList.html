<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel='stylesheet' href='kino.css'/>

    <title>Rezerwacja seansu</title>
</head>
<body>
    <div>
        <div class="header">
            <img src="kinoPlus.png" alt="kinoPlusLogo" class="logo">
        </div>

        <div class="intro">
            <h2></h2>
            <hr>
        </div>
        
        <div id="program"></div>

        <div class="footer">
            <p>Kino Plus Your movies Inc. <br>Warszawa Marszałkowska 1<br> kontakt kontakt@kinoplus.io<br> Odwiedź nasz profil i bądź na bieząco</p>
            <a href="https://www.facebook.com/"><img src="FbIcon.png" alt="facebookIcon"></a>

        </div>
    </div>
    <script>
        const data = [
                {
                    "city": "Katowice",
                    "room": "cinemaKato.html",
                    "movies": [
                        {
                            "title": "HIKER DZIKA WSPINACZKA",
                            "type": "Akcja",
                            "duration": 136,
                            "time": "14:00",
                            "age": 13,
                            "image": "hiker.png",
                            "description": "Ponad 2 godziny wypełnione emocjonującą górską wspinaczką. Imponujące ujęcia prosto z legendarnych dróg Yosemite prowadzonych przez światowej sławy wspinaczy. "
                
                        },
                
                        {
                            "title": "Nowe, stare",
                            "type": "Dramat",
                            "duration": 127,
                            "time": "17:00",
                            "age": 13,
                            "image": "",
                            "description": "Historia o odwadze, sile słowa i powojennym świecie. Rodzących się na nowo nieraz skomplikowanych relacjach. Miejscem akcji jest hiszpańska prowincja Sapad, a bohaterami jej mieszkańcy. Tu od lat mieszka Maria (Alona Moore) – włoska pisarka i miejscowy autorytet."
                
                        },
                
                        {
                            "title": "Samotna droga",
                            "type": "Horror",
                            "duration": 144,
                            "time": "21:00",
                            "age": 16,
                            "image": "",
                            "description": "Kiedy w tajemniczych okolicznościach ginie towarzysz Gima, musi on zmierzyć się z nieznanymi siłami, które próbują nie tylko odciąć mu drogę do domu, ale i uwikłać go w morderstwo przyjaciela."
                        }
                
                    ]
                
                },
                {
                    "city": "Warszawa",
                    "room": "cinemaWars.html",
                    "movies": [
                        {
                            "title": "THE FOUR",
                            "type": "Akcja",
                            "duration": 130,
                            "time": "14:00",
                            "age": 16,
                            "image": "theFour.png",
                            "description": "Wojna w Afganistanie według znanego rezysera Mike Jorggego, tym razem spoglądamy na konflikt oczami 4 zupełnie róznych zołnierzy amerykanskich, rózni ich pochodzenie, motywy i poglądy polityczne, łączy przyjaźń, jednostka i stałe widmo śmierci."
                        },
                
                        {
                            "title": "Nowe, stare",
                            "type": "Dramat",
                            "duration": 127,
                            "time": "17:00",
                            "age": 13,
                            "image": "stareNowe.png",
                            "description": "Historia o odwadze, sile słowa i powojennym świecie. Rodzących się na nowo nieraz skomplikowanych relacjach. Miejscem akcji jest hiszpańska prowincja Sapad, a bohaterami jej mieszkańcy. Tu od lat mieszka Maria (Alona Moore) – włoska pisarka i miejscowy autorytet."
                
                        },
                
                        {
                            "title": "Samotna droga",
                            "type": "Horror",
                            "duration": 144,
                            "time": "21:00",
                            "age": 16,
                            "image": "samotnaDroga.png",
                            "description": "Kiedy w tajemniczych okolicznościach ginie towarzysz Gima, musi on zmierzyć się z nieznanymi siłami, które próbują nie tylko odciąć mu drogę do domu, ale i uwikłać go w morderstwo przyjaciela."
                        }
                
                        
                    ]
                
                },
                {
                    "city": "Wrocław",
                    "room": "cinemaWroc.html",
                    "movies": [
                        {
                            "title": "HIKER DZIKA WSPINACZKA",
                            "type": "Akcja",
                            "duration": 136,
                            "time": "17:00",
                            "age": 13,
                            "image": "hiker.png",
                            "description": "Ponad 2 godziny wypełnione emocjonującą górską wspinaczką. Imponujące ujęcia prosto z legendarnych dróg Yosemite prowadzonych przez światowej sławy wspinaczy. "
                
                        },
                
                        {
                            "title": "Nowe, stare",
                            "type": "Dramat",
                            "duration": 127,
                            "time": "20:00",
                            "age": 13,
                            "image": "",
                            "description": "Historia o odwadze, sile słowa i powojennym świecie. Rodzących się na nowo nieraz skomplikowanych relacjach. Miejscem akcji jest hiszpańska prowincja Sapad, a bohaterami jej mieszkańcy. Tu od lat mieszka Maria (Alona Moore) – włoska pisarka i miejscowy autorytet."
                
                        },
                
                        {
                            "title": "Samotna droga",
                            "type": "Horror",
                            "duration": 144,
                            "time": "19:00",
                            "age": 16,
                            "image": "",
                            "description": "Kiedy w tajemniczych okolicznościach ginie towarzysz Gima, musi on zmierzyć się z nieznanymi siłami, które próbują nie tylko odciąć mu drogę do domu, ale i uwikłać go w morderstwo przyjaciela."
                        }
                
                    ]
                
                }
            ]

        window.onload = () => {
            const header = document.querySelector('.intro').querySelector('h2');
            const date = new Date();
            header.innerHTML = `Seanse w Twoim kinie ${date.getDate()}. ${date.getMonth() + 1}. ${date.getFullYear()}`;
            
            initMovies();
        }


        const urlParams = new URLSearchParams(window.location.search);
        const city = urlParams.get('city');

        const cityMovies = data.find(function(el) { 
            return el.city.toLowerCase() === city.toLowerCase()
        });

        function initMovies() {
            const container = document.querySelector('#program');
            program.innerHTML = cityMovies.movies.map(function(movie) {
                console.log(JSON.stringify(movie).replace(/"/g, '\"'));
                return `<div class="movieList">
                    <img src="${movie.image}" alt="firstMovie">
                    <div class="movieDescription">
                        <h4>${movie.title} ${movie.time}</h4>
                        <p>${movie.description}</p>
                        <button class="loginButton" onclick="openCinema('${movie.title}', '${movie.time}')">Rezerwuj</button>             
                    </div>
                </div>`
            })
        }

        function openCinema(title, time) {
            sessionStorage.setItem('city', urlParams.get('city'));
            sessionStorage.setItem('title', title);
            sessionStorage.setItem('time', time);
            window.location = cityMovies.room;
        }

    </script>
</body>
</html>