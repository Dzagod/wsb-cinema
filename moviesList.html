<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel='stylesheet' href='kino.css'/>

    <title>Rezerwacja seansu</title>
</head>
<body>
    <div>
        <div class="header">
            <img src="kinoPlus.png" alt="kinoPlusLogo" class="logo">
        </div>

        <div class="intro">
            <h2></h2>
            <hr>
        </div>
        
        <div id="program"></div>

        <div class="footer">
            <p>Kino Plus Your movies Inc. <br>Warszawa Marszałkowska 1<br> kontakt kontakt@kinoplus.io<br> Odwiedź nasz profil i bądź na bieząco</p>
            <a href="https://www.facebook.com/"><img src="FbIcon.png" alt="facebookIcon"></a>

        </div>
    </div>
    <script>
        const data = [
            {
                "city": "Katowice",
                "room": "cinemaKato.html",
                "movies": [
                    {
                        "title": "HIKER DZIKA WSPINACZKA",
                        "type": "Akcja",
                        "duration": 136,
                        "time": "17:00",
                        "age": 13,
                        "image": "hiker.png",
                        "description": "Ponad 2 godziny wypełnione emocjonującą górską wspinaczką. Imponujące ujęcia prosto z legendarnych dróg Yosemite prowadzonych przez światowej sławy wspinaczy. "

                    },

                    {
                        "title": "Nibylandia II",
                        "type": "Animowany, Fantasy",
                        "duration": 116,
                        "time": "12:00",
                        "age": 13,
                        "image": "nibyladia.png",
                        "description": "Lorem ipsum dolor sit amet consectetur adipiscing elit. Duis dapibus rutrum facilisis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam tristique libero eu nibh porttitor amet fermentum."

                    },

                    {
                        "title": "Black Suits",
                        "type": "Thriller",
                        "duration": 135,
                        "time": "21:00",
                        "age": 16,
                        "image": "blackSuits.png",
                        "description": "Nullam venenatis erat id vehicula ultrices sed ultricies condimentum. Magna sed etiam consequat, et lorem adipiscing sed nulla. Volutpat nisl et tempus et dolor libero, feugiat magna tempus, sed et lorem adipiscing."
                    }

                ]

            },
                            {
                                "city": "Warszawa",
                                "room": "cinemaWars.html",
                                "movies": [
                                    {
                                        "title": "THE FOUR",
                                        "type": "Akcja",
                                        "duration": 130,
                                        "time": "14:00",
                                        "age": 16,
                                        "image": "theFour.png",
                                        "description": "Aenean ornare velit lacus, ac varius enim ullamcorper eu. Proin aliquam sed facilisis ante interdum congue. Integer mollis, nisl amet convallis, porttitor magna ullamcorper, amet mauris. Ut magna finibus nisi nec lacinia ipsum maximus."
                                    },
                            
                                    {
                                        "title": "Nowe, stare",
                                        "type": "Dramat",
                                        "duration": 127,
                                        "time": "17:00",
                                        "age": 13,
                                        "image": "stareNowe.png",
                                        "description": "Historia o odwadze, sile słowa i powojennym świecie. Rodzących się na nowo nieraz skomplikowanych relacjach. Miejscem akcji jest hiszpańska prowincja Sapad, a bohaterami jej mieszkańcy. Tu od lat mieszka Maria (Alona Moore) – włoska pisarka i miejscowy autorytet."
                            
                                    },
                            
                                    {
                                        "title": "Samotna droga",
                                        "type": "Horror",
                                        "duration": 144,
                                        "time": "21:00",
                                        "age": 16,
                                        "image": "samotnaDroga.png",
                                        "description": "Kiedy w tajemniczych okolicznościach ginie towarzysz Gima, musi on zmierzyć się z nieznanymi siłami, które próbują nie tylko odciąć mu drogę do domu, ale i uwikłać go w morderstwo przyjaciela."
                                    }
                            
                                    
                                ]
                            
                            },
            {
                "city": "Wrocław",
                "room": "cinemaWroc.html",
                "movies": [
                    {
                        "title": "Bardziej Obcy",
                        "type": "Horror",
                        "duration": 111,
                        "time": "20:00",
                        "age": 16,
                        "image": "bardziejObcy.png",
                        "description": "Vehicula ultrices sed ultricies condimentum. Magna sed etiam consequat, et lorem adipiscing sed nulla. Volutpat nisl et tempus et dolor libero, feugiat magna tempus, sed et lorem adipiscing."

                    },

                    {
                        "title": "Wild Texas",
                        "type": "Akcja",
                        "duration": 119,
                        "time": "16:00",
                        "age": 13,
                        "image": "wildTexas.png",
                        "description": "Vehicula ultrices dolor amet ultricies et condimentum. Magna sed etiam consequat, et lorem adipiscing sed dolor sit amet, consectetur amet do eiusmod tempor incididunt ipsum suspendisse ultrices gravida."

                    },

                    {
                        "title": "Love and Hate",
                        "type": "Komedia romantyczna",
                        "duration": 104,
                        "time": "14:00",
                        "age": 13,
                        "image": "loveHate.png",
                        "description": "Aenean ornare velit lacus, ac varius enim ullamcorper eu. Proin aliquam sed facilisis ante interdum congue. Integer mollis, nisl amet convallis, porttitor magna ullamcorper, amet mauris. Ut magna finibus nisi nec lacinia ipsum maximus."
                    }

                ]

            }
        ]

        window.onload = () => {
            const header = document.querySelector('.intro').querySelector('h2');
            const date = new Date();
            header.innerHTML = `Seanse w Twoim kinie ${date.getDate()}. ${date.getMonth() + 1}. ${date.getFullYear()}`;
            
            initMovies();
        }


        const urlParams = new URLSearchParams(window.location.search);
        const city = urlParams.get('city');

        const cityMovies = data.find(function(el) { 
            return el.city.toLowerCase() === city.toLowerCase()
        });

        function initMovies() {
            const container = document.querySelector('#program');
            program.innerHTML = cityMovies.movies.map(function(movie) {
                return `<div class="movieList">
                    <img src="${movie.image}" alt="firstMovie">
                    <div class="movieDescription">
                        <h4>${movie.title} godz. ${movie.time}</h4>
                        <p>${movie.type}, ${movie.duration} min, wiek: ${movie.age}+ </p>
                        <p>${movie.description}</p>
                        <button class="loginButton" onclick="openCinema('${movie.title}', '${movie.time}')">Rezerwuj</button>             
                    </div>
                </div>`
            })
        }

        function openCinema(title, time) {
            sessionStorage.setItem('city', urlParams.get('city'));
            sessionStorage.setItem('title', title);
            sessionStorage.setItem('time', time);
            window.location = cityMovies.room;
        }

    </script>
</body>
</html>