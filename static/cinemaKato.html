<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel='stylesheet' href='kino.css'/>

    <title>Sala kinowa</title>
</head>
<body>
    <div>
        <div class="header">
            <img src="logo.png" alt="kinoPlusLogo" class="logo">
    </div>
    <div class="movieInfo"></div>
    <div class="cinemaHall">
        <div class="screen">EKRAN</div>
        
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">A</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td>
                </tr>
            </table>
        </div>
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">B</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td>
                 </tr>
            </table>
        </div>
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">C</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td>
                </tr>
            </table>           
        </div>
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">D</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td>
                </tr>
            </table>  
        </div>
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">E</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td>
                </tr>
            </table> 
        </div>
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">F</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td class="noSeat"><td>15</td><td>16</td><td>17</td>
                </tr>
            </table>
        </div>
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">G</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td class="noSeat"><td>15</td><td>16</td><td>17</td>
                </tr>
            </table>
        </div>
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">H</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td class="noSeat"></td><td>15</td><td>16</td><td>17</td>
                </tr>
            </table>
        </div>
        <div>
            <table>
                <tr>
                    <td class="rowNumber noSeat">I</td><td>1</td><td>2</td><td>3</td><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td><td>11</td><td>12</td><td>13</td><td>14</td><td class="noSeat"><td>15</td><td>16</td><td>17</td>
                </tr>
            </table>
        </div>

        <div class="legend">
            <div class="freeSeat"></div>
            <p>Miejsce wolne</p>
            <div class="takenSeat"></div>
            <p>Miejsce zarezerwowane</p>
        </div>
        <div>
            <button class="confirmButton" onclick="book()">POTWIERDŹ REZERWACJĘ</button>
        </div>
    </div>
    
    <div class="footer">
        <p>Kino Plus Your movies Inc. <br>Warszawa Marszałkowska 1<br> Kontakt: kontakt@kinoplus.io<br> Odwiedź nasz profil i bądź na bieząco</p>
        <a href="https://www.facebook.com/"><img src="FbIcon.png" alt="facebookIcon"></a>
    </div>

    <script>
        window.onload = () => {
            const header = document.querySelector('.movieInfo')
            header.innerHTML = `${sessionStorage.getItem('title')} ${sessionStorage.getItem('time')}`;
        }

        window.setTimeout(function() {
            const alertText = 'Sesja wygasła, za chwile zostaniesz przeniesiony na stronę logowania.'

            alert(alertText);

            book = function() {
                alert(alertText);
            }

            window.setTimeout(function() { window.location = 'index.html' }, 1000 * 5)
        }, 1000 * 60 * 10)

        const bookedSeats = [];

        function bookSeat({ target }){
            if (!target.classList.contains('noSeat')) {
                target.classList.toggle('bookedSeat');

                const row = target.parentElement.firstElementChild.innerHTML;
                const seat = target.innerHTML;

                bookedSeats.push(`${row} ${seat}`);
            }
        };

        function clcikedSeat(){
            var seat = document.querySelectorAll("td");
            for (var i=0;i<seat.length;i++){
                seat[i].onclick = bookSeat;
            };
        }

        function book() {
            sessionStorage.setItem('booking', bookedSeats);
            window.location = "summary.html";

        }

        clcikedSeat();
    </script>
</body>
</html>